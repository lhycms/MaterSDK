# pflow

A python library for computational materials science. You can use it to:
1. Process structure file (For PWmat, VASP, ATAT, ...)
2. Process Kohn-Sham state (For PWmat, VASP, ...)
3. Process periodic boundary condition

# 1. Brief introduction
## 1.1. Process structure file
You can:
1. Convert file format arbitrarily as below diagram
2. Choose high symmetry for 2D/3D material
3. Choose KMesh
4. ...

<img src="./demo/pics/pic_1.png" width = "500" height = "300"  />

## 1.2. Process Kohn-Sham state
1. Support several types of ab initio software, particularlly PWmat.
2. Plot bandstructure, density of state directly.
3. Process something in reciprocal space.
4. ...

<img src="./demo/pics/图片1.png" width = "300" height = "240"  />       <img src="./demo/pics/图片2.png" width = "300" height = "240"  />


## 1.3. Process perioidic boundary condination
1. Analyse the local environment for arbitrary crystalline materials, whatever the dimension of material.
2. Generate DEEPMD features conviently. Don't worry about the choice of cutoff radius.
3. You can attach any feature to sites in primitive cell.
4. ...

## 1.4. Pick out specific frame from `MOVEMENT`
```python
from pflow.io.pwmat.output.movement import Movement

movement_path = "<your_path>/MOVEMENT"
movement_extractor = MovementExtractor(
                       movement_path=movement_path)
idx_frame = 400 # 帧数从 1 开始计数
```
Output:
```shell
Full Formula (Li48 Si24)
Reduced Formula: Li2Si
abc   :   8.593165   7.620897  18.911440
angles:  90.993230  88.990768  88.698878
pbc   :       True       True       True
Sites (72)
  #  SP           a         b         c  atomic_forces                          atomic_velocitys                         magmom
---  ----  --------  --------  --------  -------------------------------------  -------------------------------------  --------
  0  Li    0.246533  0.164861  0.024556  [-0.01339992 -0.05639786  0.02202452]  [-0.01567235 -0.00829143  0.02931577]         0
  1  Li    0.497897  0.67575   0.020054  [-0.02959234  0.25368305  0.0207915 ]  [-0.01316649  0.04107363 -0.02716105]         0
  2  Li    0.742628  0.162277  0.02296   [-0.22878403 -0.18693951  0.03313763]  [-0.04017517 -0.02200597  0.00437744]         0
  3  Li    0.006998  0.659233  0.025215  [ 0.214791   -0.18657645  0.13261394]  [ 0.03161866 -0.02896914  0.03210068]         0
  4  Li    0.243587  0.169994  0.307161  [-0.29911732  0.14935464 -0.1407071 ]  [-0.03326504  0.0128695  -0.04756437]         0
  5  Li    0.495005  0.661705  0.309641  [-0.06287525 -0.10415873 -0.05355648]  [-0.02819627 -0.02458289 -0.01655547]         0
  6  Li    0.755626  0.162618  0.307371  [ 0.23455064 -0.09383705 -0.07131359]  [ 0.0321579  -0.01795694 -0.03607777]         0
  7  Li    0.004918  0.670136  0.307519  [ 0.19543814 -0.01925926 -0.16350904]  [ 0.02190413  0.01161779 -0.03803205]         0
  8  Li    0.247744  0.827177  0.128303  [-0.04122261 -0.03866171  0.05900983]  [-0.01567291 -0.02860309  0.00564836]         0
  9  Li    0.491939  0.326688  0.131736  [-0.04580681 -0.05721863  0.22629308]  [-0.04451756 -0.03925541  0.03878912]         0
 10  Li    0.758514  0.8345    0.131809  [0.0214413  0.0877658  0.24391266]     [0.04406467 0.00262231 0.04038508]            0
 11  Li    0.003451  0.340353  0.129567  [0.05711502 0.0932039  0.07833806]     [0.02297024 0.03414461 0.01231881]            0
 12  Li    0.00093   0.003137  0.208746  [ 0.0058852  -0.02585953  0.1497793 ]  [0.0078945  0.00992514 0.0391228 ]            0
 13  Li    0.245584  0.494958  0.207914  [-0.05503494 -0.11927373  0.05516284]  [-0.01979752 -0.01994124  0.02841223]         0
 14  Li    0.507911  0.002079  0.203027  [ 0.1342041   0.03479973 -0.14304913]  [ 0.03920566  0.00708145 -0.02190535]         0
 15  Li    0.743042  0.490131  0.205025  [-0.03145293 -0.10120745 -0.04346866]  [-0.03869867 -0.04432853  0.000285  ]         0
 16  Li    0.999284  0.00802   0.354249  [-0.06596405  0.27636283 -0.09121723]  [-0.00681537  0.03876702 -0.02173255]         0
 17  Li    0.245601  0.493814  0.354141  [-0.12967816 -0.08436146 -0.06340294]  [-0.02428819 -0.03042755 -0.0155183 ]         0
 18  Li    0.503142  0.999347  0.359134  [ 0.1818469  -0.04732396  0.20507142]  [ 0.01755467 -0.00666391  0.03700515]         0
 19  Li    0.744248  0.498257  0.357857  [-0.15509332 -0.03059506  0.19506959]  [-0.02465404 -0.0068942   0.02078027]         0
 20  Li    0.995357  0.998593  0.64604   [-0.16115649 -0.05190653 -0.05287608]  [-0.01784691 -0.01397455  0.02205584]         0
 21  Li    0.258578  0.501058  0.643485  [ 0.25295784 -0.03531592 -0.06701142]  [ 0.04319895  0.01006521 -0.01296367]         0
 22  Li    0.490683  0.997355  0.647106  [-0.2373561   0.0116583   0.03784667]  [-0.04556173 -0.01621011  0.03281841]         0
 23  Li    0.748267  0.503647  0.640941  [-0.07313283  0.04628809 -0.19006588]  [-0.0117638   0.0223032  -0.03369753]         0
 24  Li    0.253758  0.175786  0.462867  [-0.01250137  0.10812046  0.11615432]  [0.02006033 0.04346268 0.01628546]            0
 25  Li    0.508134  0.658519  0.457538  [ 0.11852949 -0.05790687 -0.11682287]  [ 0.03670477 -0.0324502  -0.04788036]         0
 26  Li    0.758969  0.156567  0.458849  [ 0.07032141 -0.05273528 -0.03744038]  [ 0.03367429 -0.04316739 -0.03292317]         0
 27  Li    0.992434  0.671769  0.464092  [-0.18819403  0.12420583  0.29641393]  [-0.03830827  0.02099505  0.02481328]         0
 28  Li    0.252012  0.83196   0.539129  [ 0.00619314 -0.03379689 -0.02693616]  [ 0.01288873 -0.00239639  0.00607444]         0
 29  Li    0.509999  0.338044  0.537242  [ 0.06124904  0.04155827 -0.11815199]  [ 0.04338989  0.0241526  -0.01800204]         0
 30  Li    0.757078  0.828281  0.534644  [ 0.22549054 -0.12890954 -0.23017459]  [ 0.03370167 -0.02486843 -0.03605627]         0
 31  Li    0.001908  0.324151  0.539625  [ 0.06631978 -0.1587581  -0.00946671]  [ 0.01003535 -0.03845792  0.01684945]         0
 32  Li    0.24366   0.823448  0.692753  [-0.13715358 -0.15474278  0.11883004]  [-0.03387292 -0.04783916  0.040484  ]         0
 33  Li    0.501546  0.330314  0.690622  [-0.02809134 -0.14730738  0.10172994]  [ 0.00736583 -0.01825071  0.02544278]         0
 34  Li    0.753617  0.83287   0.685174  [ 0.23977938 -0.06172065 -0.0148671 ]  [ 0.02185975 -0.00499554 -0.04227081]         0
 35  Li    0.99796   0.335997  0.691484  [-0.09460635 -0.05492666  0.08706747]  [-0.00665982  0.0076647   0.02554772]         0
 36  Li    0.25321   0.841485  0.975589  [ 0.11688299  0.2477618  -0.09676682]  [ 0.01985639  0.03768876 -0.02345534]         0
 37  Li    0.493711  0.322965  0.980396  [-0.15293121 -0.34797648 -0.06998155]  [-0.02995617 -0.04560368  0.03550932]         0
 38  Li    0.755401  0.840249  0.97768   [ 0.07462371  0.17805907 -0.07525112]  [0.02802765 0.02937667 0.00421053]            0
 39  Li    0.006657  0.331754  0.979012  [0.23454833 0.02764994 0.00781343]     [ 0.03180035 -0.01122949  0.02655093]         0
 40  Li    0.007456  0.006465  0.797872  [0.09451654 0.03145669 0.19017775]     [0.03775877 0.03060872 0.0388391 ]            0
 41  Li    0.253799  0.499385  0.798919  [0.02878087 0.07127964 0.26575172]     [0.02064075 0.00110828 0.04297166]            0
 42  Li    0.494968  0.002571  0.796252  [-0.12664317  0.05065067  0.12824541]  [-0.02888883  0.01026441  0.01672453]         0
 43  Li    0.75257   0.503379  0.798258  [-0.00411044  0.04026956  0.17317265]  [0.01516611 0.0176773  0.04284948]            0
 44  Li    0.255412  0.159842  0.873845  [ 0.09818728 -0.13641472  0.00851416]  [ 0.02857362 -0.02989375  0.02321968]         0
 45  Li    0.494812  0.674291  0.869962  [-0.05010597  0.03157181 -0.17585896]  [-0.02630645  0.03084492 -0.0231738 ]         0
 46  Li    0.742114  0.161009  0.874801  [-0.09181835 -0.10082923  0.09384308]  [-0.03736282 -0.03300288  0.03417018]         0
 47  Li    0.006798  0.668391  0.872832  [ 0.0741321  -0.00305158 -0.05427557]  [0.03716216 0.00856147 0.00868525]            0
 48  Si    0.997196  0.000808  0.059961  [-0.03885816  0.04732692  0.11314963]  [-0.01666395  0.00427909 -0.02025097]         0
 49  Si    0.249124  0.499852  0.063326  [-0.22666006  0.105394    0.53013519]  [-0.00166824 -0.00480867  0.01359904]         0
 50  Si    0.49818   0.002286  0.059983  [ 0.04194037  0.08479934 -0.32336127]  [-0.00765299  0.01063227 -0.01966452]         0
 51  Si    0.745853  0.499533  0.061349  [-0.04237101 -0.0178573   0.21737063]  [-0.02074003  0.00151092 -0.0073471 ]         0
 52  Si    0.251981  0.835907  0.270284  [-0.02054796  0.01272331 -0.6277424 ]  [ 0.01007888  0.0108265  -0.00687968]         0
 53  Si    0.498942  0.332987  0.270816  [-0.04816348  0.14162599 -0.64897222]  [-0.00347479 -0.00125642  0.0025932 ]         0
 54  Si    0.746064  0.82862   0.270353  [-0.11252847  0.01286786 -0.49280789]  [-0.02306267 -0.01995575 -0.00754963]         0
 55  Si    0.000639  0.337111  0.27303   [0.14849782 0.01320645 0.05385117]     [0.00110501 0.01825987 0.01782693]            0
 56  Si    0.251907  0.829675  0.395595  [ 0.14237786 -0.09073027  0.61812633]  [ 0.01525952 -0.01614407  0.0045216 ]         0
 57  Si    0.502736  0.331187  0.396022  [0.16158498 0.00202159 0.61707768]     [ 0.02060418 -0.00558459  0.00933037]         0
 58  Si    0.745568  0.829493  0.39427   [-0.26239599 -0.07518708  0.47482023]  [-0.02299802 -0.01456865 -0.01472199]         0
 59  Si    0.996348  0.336656  0.394524  [-0.05830639  0.02478675 -0.07759493]  [-0.01399984  0.01016586 -0.01494969]         0
 60  Si    0.247084  0.169792  0.606759  [-0.05089853  0.0742186   0.19540566]  [-0.0195581   0.014128    0.02190625]         0
 61  Si    0.50224   0.666498  0.603366  [ 0.01376325 -0.11331445 -0.69803566]  [ 0.0102204  -0.00190933 -0.00674218]         0
 62  Si    0.752377  0.171244  0.605377  [ 0.153674    0.19049818 -0.30596632]  [0.0145898  0.01802843 0.00605796]            0
 63  Si    0.997183  0.66902   0.602574  [-0.2254414   0.136572   -0.92731588]  [-0.00801116  0.01362241 -0.01953606]         0
 64  Si    0.254049  0.165133  0.72665   [ 0.17336088 -0.01108051 -0.26575679]  [ 0.01748291 -0.00229404 -0.01663617]         0
 65  Si    0.501222  0.668112  0.730387  [-0.02642743  0.00614117  0.84978609]  [0.0045906  0.00374151 0.01486533]            0
 66  Si    0.749223  0.169811  0.728373  [-0.035833    0.16171681  0.21519831]  [-0.00453488  0.01760614 -0.0040182 ]         0
 67  Si    0.995938  0.672464  0.729737  [0.01531509 0.14427229 0.67934952]     [-0.01730759  0.01646019  0.01078566]         0
 68  Si    0.003333  0.996718  0.936854  [ 0.07290407 -0.16631704 -0.36777694]  [ 0.02108051 -0.01433261 -0.00526121]         0
 69  Si    0.253045  0.495251  0.937931  [ 0.00257053 -0.1731131  -0.62582241]  [ 0.01815751 -0.02138941 -0.00058968]         0
 70  Si    0.498547  0.00286   0.939493  [-0.1360915   0.15734153  0.19855925]  [-0.0057966   0.01126682  0.01299549]         0
 71  Si    0.750529  0.502553  0.939188  [ 0.0670155   0.1030627  -0.33242543]  [0.00384533 0.01666297 0.01847533]            0
```


# 2. Installation
## 2.1. Online
```shell
$ git clone git@github.com:LonxunQuantum/pwkit.git
$ cd pflow
$ pip install .
```

## 2.1. Offline
1. You can download a python interpreter containing `pflow` from https://www.jianguoyun.com/p/DfhQFx8Q_qS-CxifgfwEIAA.